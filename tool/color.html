<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>color 转换器</title>
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="icon" sizes="100x100" href="../favicon.ico">
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-title" content="MCBE UI 文档">
    <meta name="apple-touch-icon-precomposed" size="57x57" href="../web_icon.png">
    <meta name="apple-touch-icon-precomposed" size="114x114" href="../web_icon.png">
    <meta name="apple-touch-icon-precomposed" size="152x152" href="../web_icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="keywords" content="我的世界UI,基岩版UI,json ui教程,JSON UI教程,json ui,JSON UI">
    <meta name="description" content="本网站用于帮助 MCBE 资源创作者创作 UI，您可以参考本文档的内容来制作您的 UI！">
    <meta name="author" content="MC_spruce">

    <script src="../src/js/jQuery.js"></script>
    <link href="../src/css/main.css" rel="stylesheet">
    <div class="top_header">
        <ul>
            <li class="animated rollIn">
              <div>
                <a id="open-btn" style="top: -2px;padding: 1px;cursor:pointer;font-size: 20px" onclick="openNav()">&#9776;</a>
                <a id="close-btn" style="top: -30px;font-size: 20px" href="javascript:void(0)" onclick="closeNav()">◄</a>
              </div>
            </li>
            <li><a href="https://jsonui.netlify.app">我的世界基岩版 UI 文档</a></li>
            <li style="right:5px;float:right;"><button type="button" class="theme-btn" onclick="changeMode()">切换主题</button>
            </li>
        </ul>
    </div>
</head>
<body id="root" data-theme="light">
    <!--正文-->
    <div id="content">
        <div class="left_title"><h1>Color 转换器</h1></div>
        <div class="right_content animated bounceInRight">
            <div class="dropdown">
                <button class="drop_btn" onclick="dropdown()"><svg class="w-6 h-6" style="width: 16px;height: auto;margin-top: 2px;" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>&nbsp;目录</button>
                <div class="dropdown-content" id="DropdownContent"></div>
            </div>
            <p>
                <div class="info-panel pc animated bounceInRight" data-wow-delay="0.65s">
                阅读进度 - <a id="number_progress"></a>
                <div class="progress-bg"><div id="progress"></div></div>
                </div>
            </p>
        </div>
        <div class="left_content" hide_bq="true">
            <p><h3>选择</h3>
            <input class="no-user-select color_input" type="color" value="#ff0000" id="color_input" /></p>
            <p>
            <h3>输出</h3>
            预览：<a id="view" style="border-radius: 6px;" class="no-user-select">加载中</a>
            <br>HEX：<a id="hex" class="no-user-select"></a>
            <br>RGB：<a id="rgb" class="no-user-select"></a>
            <br>Color 数组：<a id="rgb_arr" class="no-user-select"></a>
            <p><button class="home-btn" onclick="copy_code('hex','复制 Hex 成功')">复制Hex</button>
            <button class="home-btn" onclick="copy_code('rgb','复制 RGB 成功')">复制RGB</button>
            <button class="home-btn" onclick="copy_code('rgb_arr','复制 Color数组 成功')">复制Color数组</button></p>
        </div>
<script>
setInterval(() => {
  let color_input = document.getElementById('color_input');
  $("#hex").text(color_input.value);
  $("#rgb").text(hex_to_rgb(color_input.value));
  $("#rgb_arr").text(hex_to_rgb_arr(color_input.value));
  $("#view").css({"background":`${color_input.value}`,"color":`${color_input.value}`});
}, 300);

function hex_to_rgb(hex) {
  const red = Number('0x' + hex.substring(1, 3));
  const green = Number('0x' + hex.substring(3, 5));
  const blue = Number('0x' + hex.substring(5, 7));
  return `rgb(${red}, ${green}, ${blue})`;
}

function hex_to_rgb_arr(hex) {
  const arr1 = ((Number('0x' + hex.substring(1, 3)))/255).toFixed(3);
  const arr2 = ((Number('0x' + hex.substring(3, 5)))/255).toFixed(3);
  const arr3 = ((Number('0x' + hex.substring(5, 7)))/255).toFixed(3);
  return `[ ${handleCutZero(arr1)}, ${handleCutZero(arr2)}, ${handleCutZero(arr3)} ]`;
}

function handleCutZero(num) {
  let newstr = num;
  let leng = num.length - num.indexOf('.') - 1;
  if (num.indexOf('.') > -1) {
    for (let i = leng; i > 0; i--) {
      if (
        newstr.lastIndexOf('0') > -1 &&
        newstr.substr(newstr.length - 1, 1) == 0
      ) {
        let k = newstr.lastIndexOf('0');
        if (newstr.charAt(k - 1) == '.') {
          return newstr.substring(0, k - 1);
        } else {
          newstr = newstr.substring(0, k);
        }
      } else {
        return newstr;
      }
    }
  }
  return num;
}
</script>
    </div>
    <!--正文-->
    <link href="../src/css/color.css" rel="stylesheet">
    <link href="../src/css/animate.css" rel="stylesheet">
    <script src="../src/js/main.js"></script>
</body>

</html>